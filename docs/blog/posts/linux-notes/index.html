<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yuxi Liu">
<meta name="dcterms.date" content="2022-12-10">
<meta name="description" content="My quick reference for using Linux for doing things.">

<title>Yuxi on the Wired - Notes on Using Linux</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../img/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="Yuxi on the Wired - Notes on Using Linux">
<meta property="og:description" content="My quick reference for using Linux for doing things.">
<meta property="og:site-name" content="Yuxi on the Wired">
<meta name="twitter:title" content="Yuxi on the Wired - Notes on Using Linux">
<meta name="twitter:description" content="My quick reference for using Linux for doing things.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../img/favicon.ico" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Yuxi on the Wired</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../projects/index.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about/index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../notes/index.qmd" rel="" target="">
 <span class="menu-text">Notes</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://bair.berkeley.edu/" rel="" target=""><i class="bi bi-folder-symlink" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:yuxi.liu.1995@gmail.com" rel="" target=""><i class="bi bi-envelope" role="img" aria-label="email">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Notes on Using Linux</h1>
                  <div>
        <div class="description">
          My quick reference for using Linux for doing things.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">programming</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Yuxi Liu </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 10, 2022</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">December 11, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-koans" id="toc-sec-koans" class="nav-link active" data-scroll-target="#sec-koans">Linux koans</a></li>
  <li><a href="#sec-path" id="toc-sec-path" class="nav-link" data-scroll-target="#sec-path">How to <code>PATH</code></a></li>
  <li><a href="#how-to-directories" id="toc-how-to-directories" class="nav-link" data-scroll-target="#how-to-directories">How to directories</a>
  <ul class="collapse">
  <li><a href="#where-to-install-read-only-things" id="toc-where-to-install-read-only-things" class="nav-link" data-scroll-target="#where-to-install-read-only-things">Where to install read-only things</a></li>
  <li><a href="#where-to-install-read-write-things" id="toc-where-to-install-read-write-things" class="nav-link" data-scroll-target="#where-to-install-read-write-things">Where to install read-write things</a></li>
  <li><a href="#where-to-do-read-write-things" id="toc-where-to-do-read-write-things" class="nav-link" data-scroll-target="#where-to-do-read-write-things">Where to do read-write things</a></li>
  <li><a href="#other-things-you-should-not-modify-them" id="toc-other-things-you-should-not-modify-them" class="nav-link" data-scroll-target="#other-things-you-should-not-modify-them">Other things (you should not modify them)</a></li>
  </ul></li>
  <li><a href="#environment-variables" id="toc-environment-variables" class="nav-link" data-scroll-target="#environment-variables">Environment variables</a>
  <ul class="collapse">
  <li><a href="#how-to-control-them" id="toc-how-to-control-them" class="nav-link" data-scroll-target="#how-to-control-them">How to control them</a></li>
  <li><a href="#common-ones" id="toc-common-ones" class="nav-link" data-scroll-target="#common-ones">Common ones</a></li>
  </ul></li>
  <li><a href="#cron-jobs" id="toc-cron-jobs" class="nav-link" data-scroll-target="#cron-jobs">Cron jobs</a>
  <ul class="collapse">
  <li><a href="#quick-reference" id="toc-quick-reference" class="nav-link" data-scroll-target="#quick-reference">Quick reference</a></li>
  <li><a href="#creating-a-cron-job" id="toc-creating-a-cron-job" class="nav-link" data-scroll-target="#creating-a-cron-job">Creating a Cron Job</a></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best Practices</a></li>
  <li><a href="#cron-environment-variables" id="toc-cron-environment-variables" class="nav-link" data-scroll-target="#cron-environment-variables">Cron environment variables</a></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting">Troubleshooting</a></li>
  </ul></li>
  <li><a href="#how-to-wsl" id="toc-how-to-wsl" class="nav-link" data-scroll-target="#how-to-wsl">How to WSL</a>
  <ul class="collapse">
  <li><a href="#sec-init-vs-systemd" id="toc-sec-init-vs-systemd" class="nav-link" data-scroll-target="#sec-init-vs-systemd"><code>init</code> vs <code>systemd</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>This is my quick reference for using Linux for doing things. I claim no originality. Mostly they are copy pasted from the internet and tested by me. An increasing proportion of those are produced by AI.</p>
<section id="sec-koans" class="level2">
<h2 class="anchored" data-anchor-id="sec-koans">Linux koans</h2>
<p>Everything is <del>a file</del> <del>a file or a directory</del> an inode. An inode (index node) is a representation of a sequence of data that the system can access. A file is just a list of inodes, and a directory is just a list of files.</p>
<p>Every command is an executable.</p>
<p>Every machine is a server. Some merely serve extremely slow machines (humans, aka “users”).</p>
<p>The <code>\usr</code> is not the user. It is the <strong>U</strong>NIX <strong>S</strong>ystem <strong>R</strong>esources.</p>
<p>The <code>\usr</code> was the user, until Unix became so large that <code>\bin</code> that <code>\bin</code> overflowed and had to put the rest of them in <code>\usr\bin</code>. This was embarrassing for all involved, so they moved user files to <code>\home</code>, and pretend that <code>\usr</code> stands for UNIX System Resources. (<a href="http://lists.busybox.net/pipermail/busybox/2010-December/074114.html">here</a>). A mistake that only took 40 years to fix.</p>
<p>In the beginning was the command line. The command line is just a face of the shell. What was the original face of the command line before the shell was born?</p>
<p>The shell reads in a stream of letters in real time, because the user is just another file (a streaming file, named <code>stdin</code>). Like all streaming files, the user is eternal and inexhaustible. The shell stands, rapt in attention, afore the user file.</p>
<p>So when does the user ever leave? The user never leaves. The shell simply kills itself when the user types <code>exit</code>. The shell would rather die than to face the prospect of reading the last word from the user.</p>
<p>So when does the shell ever break out of its rapt attention? Whenever it sees <code>\n</code>, it is shaken out of its trance and interprets what the user has just said, in the interval bracketed between two <code>\n</code>s.</p>
<p>The shell has one ear and two mouths. The ear is <code>stdin</code>, and the mouths are <code>stdout</code> and <code>stderr</code>. The shell has a tiny brain which is only capable of interpreting <a href="https://learnxinyminutes.com/docs/bash/">the few syntactic elements of bash scripts</a>. Everything else it wants to do, it dutifully sends a binary message into the oracular altar of the Linux kernel, from which an oceanic voice replies the answer of the kernel.</p>
</section>
<section id="sec-path" class="level2">
<h2 class="anchored" data-anchor-id="sec-path">How to <code>PATH</code></h2>
<p>The <code>PATH</code> environment variable is a list of directories that the shell searches for commands. It is a colon-separated list of directories. For example, just about every Linux installation has a <code>PATH</code> variable that looks like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To add things to <code>PATH</code>, use the <code>export</code> command, like <code>export PATH="$HOME/bin:$PATH"</code>.</p>
</section>
<section id="how-to-directories" class="level2">
<h2 class="anchored" data-anchor-id="how-to-directories">How to directories</h2>
<p>Based on <a href="https://askubuntu.com/a/135679" class="uri">https://askubuntu.com/a/135679</a>, <a href="https://serverfault.com/a/24525" class="uri">https://serverfault.com/a/24525</a>, <code>man hier</code>, <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard - Wikipedia</a>.</p>
<section id="where-to-install-read-only-things" class="level3">
<h3 class="anchored" data-anchor-id="where-to-install-read-only-things">Where to install read-only things</h3>
<ul>
<li><p><code>/bin</code> and <code>/sbin</code>: binaries and superuser-binaries.</p></li>
<li><p><code>/usr</code>: System-wide, read-only files installed by the OS. This directory can be remotely mounted to multiple hosts safely.</p></li>
<li><p><code>/usr/local</code>: System-wide, read-only files installed by <code>root</code>. <em>And that’s why most directory names from <code>/usr</code> are duplicated here</em>.</p></li>
<li><p><code>/opt</code> - System-wide, read-only <em>and bundled-up</em> software. That is, software that does not split their files over <code>bin</code>, <code>lib</code>, <code>share</code>, <code>include</code> like well-behaved software should.</p></li>
<li><p><code>/usr/bin</code> and <code>usr/sbin</code>: They no longer exist. Just use <code>/bin</code> and <code>/sbin</code>.</p></li>
<li><p><code>~/.local</code>: the per-user counterpart of <code>/usr/local</code>, that is: software installed by (and for) each user. Like <code>/usr</code>, it has its own <code>~/.local/share</code>, <code>~/.local/bin</code>, <code>~/.local/lib</code>.</p></li>
<li><p><code>~/.local/opt</code>: The per-user counterpart of <code>/opt</code></p></li>
</ul>
<p>Requiem for <code>/usr/bin</code> and <code>/usr/sbin</code>: Originally, <code>/bin</code> and <code>/lib</code> are only for binaries and libraries <em>required for booting</em>, while <code>/usr/bin</code> and <code>/usr/lib</code> are for all the other executables and libraries. This is no longer true, as some binaries required for booting has over the years leaked into those two folders (if there is a way to make a mess, people will make it), so since Ubuntu 20.04, they no longer exist, to remove this mess.</p>
<p>How to install for local user only:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$HOME</span>/.local</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>How to install for everyone: <code>sudo ./configure &amp;&amp; make &amp;&amp; make install</code></p>
</section>
<section id="where-to-install-read-write-things" class="level3">
<h3 class="anchored" data-anchor-id="where-to-install-read-write-things">Where to install read-write things</h3>
<p>Read-write things are typically configuration files, since they are read and written by both the user and binary executables.</p>
<ul>
<li><code>/etc</code>: System-wide configuration. Typically used by the OS to decide what to do when starting up, shutting down, etc.</li>
<li><code>~/.config</code>: Per-user configuration files. Although because of legacy, you keep seeing nonsense like <code>.bashrc</code> in your home directory instead of <code>~/.config/.bashrc</code>. Here <code>rc</code> means “run configuration”.</li>
</ul>
</section>
<section id="where-to-do-read-write-things" class="level3">
<h3 class="anchored" data-anchor-id="where-to-do-read-write-things">Where to do read-write things</h3>
<ul>
<li><code>/home/username</code>, or just <code>~</code>: Each user typically is only able to modify their own folder here, like <code>~/myfile.txt</code>.</li>
<li><code>/tmp</code>: If you need to create something just for the moment, then make it here. It will be deleted when the system restarts.</li>
</ul>
</section>
<section id="other-things-you-should-not-modify-them" class="level3">
<h3 class="anchored" data-anchor-id="other-things-you-should-not-modify-them">Other things (you should not modify them)</h3>
<ul>
<li><code>/run:</code> <strong>run</strong>time temporary data, representing the system’s state since the last boot. It’s used for storing process IDs, lock files, and other files that are would normally be stored in <code>/tmp</code>. It is basically <code>/tmp</code> for the machine.</li>
<li><code>/var</code>: Variable data. It is somewhat like <code>/run</code> in that both are meant to be read-written by programs, but unlike <code>/run</code>, data here persists over reboots. This is often used for logging information. For example, try <code>vim /var/log/user.log</code></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Modifying anything below this line may brick the system. Reading is fine though.</p>
</div>
</div>
<ul>
<li><code>/lib</code>: <strong>lib</strong>raries. You should not handle it directly. Some libraries are added at OS installation, and others at program installation. If you have a broken installation, you might be asked to manually copy some files looking like <code>libxxx.so</code> here. (<code>so</code> stands for “shared object”.)</li>
<li><code>/boot</code>: Files required for <strong>booting</strong>. For example, the bootloader, the kernel, the initramfs (initial RAM file system).</li>
<li><code>/dev</code>: <strong>Device</strong> files. It typically looks like <code>/dev/sda1</code>, <code>/dev/sda2</code>, etc. Other than things like <code>sda1</code> (for harddrive) you might notice <code>tty1</code> and <code>pty1</code>’ which stand for “teletype” and “pseudo teletype”, respectively, but they are actually used as files to read whatever the user is typing from (the user is a file, see <a href="#sec-koans">Section&nbsp;1</a>). There are some odd ones like:
<ul>
<li><code>/dev/null</code>, which is a “file” that you write to when you just want to throw something away (everything is a file, even a black hole…).</li>
<li><code>/dev/urandom</code>, which is a random number generator. It is preferred over <code>/dev/random</code>. See <a href="https://www.2uo.de/myths-about-urandom/#orthodoxy">here</a>.</li>
<li><code>/dev/zero</code>, which is a file that you can’t write to, but you can read, but it’s filled with zeros.</li>
</ul></li>
<li><code>/media</code>: Mount removable <strong>medias</strong>, like USB drives and SD cards. For example, you can mount a USB at <code>/media/usb1</code> and another one at <code>/media/usb2</code>. Mounting is typically done automatically by the system when you plug it in.</li>
<li><code>/mnt</code>: <strong>Mounts</strong> that are not so easily removable, like a hard drive, or a network drive. And unlike <code>/media</code>, mounting and unmounting is not automatic. On WSL, this typically has just one important thing: <code>/mnt/c</code>.</li>
<li><code>/srv</code>: Static files that are <strong>served</strong> out. <code>/srv/http</code> would be for static websites, <code>/srv/ftp</code> for an FTP server. It is usually used only on webservers, not an end-user machine like your laptop.</li>
</ul>
</section>
</section>
<section id="environment-variables" class="level2">
<h2 class="anchored" data-anchor-id="environment-variables">Environment variables</h2>
<section id="how-to-control-them" class="level3">
<h3 class="anchored" data-anchor-id="how-to-control-them">How to control them</h3>
<p>Use <code>echo $X</code> to see what the current value of <code>X</code> is.</p>
<p>For current session, use <code>export</code> like <code>export EDITOR=nano</code>.</p>
<p>For all sessions, add to your <code>.bashrc</code> or <code>.profile</code>. If you just want to add it to the end (not recommended, as you can end up with an archeological <a href="https://en.wikipedia.org/wiki/Tell_(archaeology)">tell</a>), you can do one-liner like <code>echo "export EDITOR=nano" &gt;&gt; ~/.bashrc</code>.</p>
</section>
<section id="common-ones" class="level3">
<h3 class="anchored" data-anchor-id="common-ones">Common ones</h3>
<ul>
<li><code>PATH</code>: path to binaries. See <a href="#sec-path">Section&nbsp;2</a>.</li>
<li><code>EDITOR</code>: default editor.</li>
<li><code>SHELL</code>: default shell.</li>
<li><code>HOME</code>: home directory.</li>
<li><code>USER</code>: current user.</li>
<li><code>PS1</code>: current prompt (just try <code>echo $PS1</code> if it doesn’t make sense).</li>
</ul>
<p>You can change prompts in a rather arcane language. For example, try this one:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PS1</span><span class="op">=</span><span class="st">"\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n</span><span class="dt">\\</span><span class="st">$ "</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="cron-jobs" class="level2">
<h2 class="anchored" data-anchor-id="cron-jobs">Cron jobs</h2>
<p>Cron jobs are scheduled tasks that run periodically. For scheduling one-off tasks, use the <code>at</code> command. The name came from “Cronos”, the name of the Greek god of time. A good reference is <a href="http://www.unixgeeks.org/security/newbie/unix/cron-1.html">Newbie: Intro to cron</a>.</p>
<section id="quick-reference" class="level3">
<h3 class="anchored" data-anchor-id="quick-reference">Quick reference</h3>
<p>The cron job syntax is as follows (See <a href="https://web.archive.org/web/20231205205101/https://crontab.guru/">Crontab.guru - The cron schedule expression editor</a>):</p>
<pre><code># ┌───────────── minute (0–59)
# │ ┌───────────── hour (0–23)
# │ │ ┌───────────── day of the month (1–31)
# │ │ │ ┌───────────── month (1–12)
# │ │ │ │ ┌───────────── day of the week (0–6) (Sunday to Saturday)
# │ │ │ │ │                                   
# │ │ │ │ │
# │ │ │ │ │
# * * * * * &lt;command to execute&gt;

* * * * * &lt;once a minute&gt;
0 * * * * &lt;once an hour at 0-th minute&gt;
0 0 * * * &lt;once a day at midnight&gt;
0 0 1 * * &lt;once a month at the midnight of the 1-th day&gt;
0 0 1 1 * &lt;once a year at the midnight of January 1&gt;
* * * * 0 &lt;once a minute every Sunday&gt;</code></pre>
<p>Check that <code>cron</code> service is running by <code>systemctl list-unit-files --type=service | grep "cron"</code></p>
<p>List cron jobs by <code>crontab -l</code>.</p>
</section>
<section id="creating-a-cron-job" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-cron-job">Creating a Cron Job</h3>
<p>For this example, we create a job that runs every 20 seconds.</p>
<ol type="1">
<li><p><strong>Open Crontab</strong>: Open your crontab file by typing <code>crontab -e</code> in your terminal. This command opens the crontab file for the current user in the default text editor.</p></li>
<li><p><strong>Write Cron Job</strong>: Standard cron jobs can’t run in a smaller granularity than a minute. For a once-per-20-seconds job, you’ll need to use a workaround.</p>
<p>Add the following lines to your crontab:</p></li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a> <span class="ex">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> /path/to/script.sh</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> sleep 20<span class="kw">;</span> <span class="ex">~/cronjobs/script.sh</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="ex">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> sleep 40<span class="kw">;</span> <span class="ex">~/cronjobs/script.sh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li><strong>Script Content</strong>: Create <code>script.sh</code>, have the following content:</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="va">CRON_MESSAGE</span><span class="op">=</span><span class="st">"Some message"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"The cron message is: </span><span class="va">$CRON_MESSAGE</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then save and close the file, and <code>chmod +x ~/cronjobs/script.sh</code> to make it executable.</p>
</section>
<section id="best-practices" class="level3">
<h3 class="anchored" data-anchor-id="best-practices">Best Practices</h3>
<ul>
<li><strong>Location</strong>: Store scripts in a dedicated directory, such as <code>~/cronjobs</code>, for better organization.</li>
<li><strong>Script Naming</strong>: Use meaningful names for your scripts for easier identification.</li>
<li><strong>Logging</strong>: Implement logging within your scripts to capture output and errors for later review. It’s good practice to use <code>/var/log/cron</code> for logging.</li>
</ul>
</section>
<section id="cron-environment-variables" class="level3">
<h3 class="anchored" data-anchor-id="cron-environment-variables">Cron environment variables</h3>
<p>Cron jobs run in a minimal environment, so any environment variable, like <code>CRON_MESSAGE</code>, is not accessible by the cron script. Instead, you have a few choices:</p>
<ol type="1">
<li>Put it directly in the crontab file:</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="va">CRON_MESSAGE</span><span class="op">=</span><span class="st">"Some message"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> /path/to/script.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Put it directly in the script:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CRON_MESSAGE</span><span class="op">=</span><span class="st">"Some message"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rest of the script follows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>If the variable is defined in an external file (like ~/.bashrc, ~/.profile, or a custom configuration file), you can source that file at the beginning of your script:</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /path/to/environment_variables_file</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rest of the script follows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="troubleshooting" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting">Troubleshooting</h3>
<ul>
<li><strong>Check Permissions</strong>: Ensure your script is executable and the cron daemon has the necessary permissions to run it.</li>
<li><strong>Logs</strong>: Check <code>/var/log/cron</code> or relevant logs for errors.</li>
</ul>
<p>If you’re using WSL, ensure that the cron service is running since it doesn’t start by default. Use <code>sudo service cron start</code>. You can configure <code>~/.bashrc</code> by adding the following line: <code>sudo service cron start</code>, but it would make you enter the password at every login.</p>
<p>Alternatively, enable <code>systemd</code> as described at <a href="#sec-init-vs-systemd">Section&nbsp;6.1</a>.</p>
</section>
</section>
<section id="how-to-wsl" class="level2">
<h2 class="anchored" data-anchor-id="how-to-wsl">How to WSL</h2>
<section id="sec-init-vs-systemd" class="level3">
<h3 class="anchored" data-anchor-id="sec-init-vs-systemd"><code>init</code> vs <code>systemd</code></h3>
<p>Every Linux starts its first process with some root process. The <code>init</code> is the traditional and simpler one, and <code>systemd</code> is more modern and advanced one.</p>
<p>WSL by default starts with <code>init</code> instead of <code>systemd</code>, perhaps to save time and compute. This makes things annoying for some users. You can check by <code>ps -p 1 -o comm</code> and see what it returns.</p>
<p>To enable <code>systemd</code>, enter in your <code>/etc/wsl.conf</code> with:</p>
<pre><code>[boot]
systemd=true</code></pre>
<p>or just use <code>cat "[boot]\nsystemd=true" &gt;&gt; /etc/wsl.conf</code>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><span class="faux-block">Everything ©<a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a></span></div>   
    <div class="nav-footer-center"><span class="faux-block">Yuxi on the Wired</span></div>
    <div class="nav-footer-right"><span class="faux-block"><a href="../../../sitemap.xml">sitemap</a></span></div>
  </div>
</footer>



</body></html>